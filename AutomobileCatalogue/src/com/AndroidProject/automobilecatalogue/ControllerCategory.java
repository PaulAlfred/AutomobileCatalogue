package com.AndroidProject.automobilecatalogue;import java.io.BufferedReader;import java.io.FileNotFoundException;import java.io.IOException;import java.io.InputStream;import java.io.InputStreamReader;import java.io.OutputStream;import java.io.OutputStreamWriter;import java.io.Writer;import java.util.ArrayList;import org.json.JSONArray;import org.json.JSONException;import org.json.JSONTokener;import android.content.Context;public class ControllerCategory  {	private Context context;	private String mFilename;	public ControllerCategory(Context c, String f) {		context = c;		mFilename = f;	}	//saves the categories to the Categories.json file, that was previously added to ModelCategories	//or creates a new Categories.json, then stores	//to the default location with Filename = mFilename	public void saveCategory(ArrayList<ModelCategory> categories) throws JSONException, IOException {		JSONArray array = new JSONArray();		for (ModelCategory c : categories)			array.put(c.toJSON());		Writer writer = null;		try{			OutputStream out = context.openFileOutput(mFilename, Context.MODE_PRIVATE);			writer = new OutputStreamWriter(out);			writer.write(array.toString());		} catch(IOException e){			e.printStackTrace();		}		finally {			if(writer != null)				try {					writer.close();				} catch (IOException e) {					e.printStackTrace();				}		}	}	//loads the Categories form mFilename	public ArrayList<ModelCategory> loadCategories() throws IOException, JSONException{		ArrayList<ModelCategory> categories = new ArrayList<ModelCategory>();		BufferedReader reader = null;		try{			InputStream in = context.openFileInput(mFilename);			reader = new BufferedReader(new InputStreamReader(in));			StringBuilder jsonString = new StringBuilder();			String line = null;			while((line = reader.readLine()) != null){				jsonString.append(line);			}			JSONArray array = (JSONArray) new JSONTokener(jsonString.toString()).nextValue();			for(int i=0; i<array.length(); i++){				categories.add(new ModelCategory(array.getJSONObject(i)));			}			if(reader != null)				reader.close();		} catch (FileNotFoundException e){		}		return categories;	}}